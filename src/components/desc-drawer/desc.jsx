import React, { useState } from "react";
import {
  ExpansionPanel,
  ExpansionPanelDetails,
  ExpansionPanelSummary,
  Divider
} from "@material-ui/core";
import { createStructuredSelector } from "reselect";
import { connect } from "react-redux";
import { selectAllDesc } from "redux/desc/desc.selector";
import ExpandMoreIcon from "@material-ui/icons/ExpandMore";

const DescDrawer = ({ desc }) => {
  const [expanded, setExpanded] = useState(false);

  const handleChange = panel => (event, isExpanded) => {
    setExpanded(isExpanded ? panel : false);
  };

  return (
    <div className="desc">
      <h3 className="center u-margin-bottom-small">Description Guideline</h3>
      {desc.map(desc => (
        <ExpansionPanel
          key={desc._id}
          expanded={expanded === desc._id}
          onChange={handleChange(desc._id)}
        >
          <ExpansionPanelSummary
            expandIcon={<ExpandMoreIcon />}
            aria-controls="panel1bh-content"
            id="panel1bh-header"
          >
            <p className="desc-title">{desc.name}</p>
          </ExpansionPanelSummary>
          <ExpansionPanelDetails>
            <div className="item desc-title space_between">
              <span>CWE</span>
              <span>{desc.cwe}</span>
            </div>
            <Divider />
            <div className="item description">
              <p className="desc-title">Description</p>
              <p>{desc.description}</p>
            </div>
          </ExpansionPanelDetails>
        </ExpansionPanel>
      ))}
    </div>
  );
};

const mapStateToProps = createStructuredSelector({
  desc: selectAllDesc
});

export default connect(mapStateToProps, null)(DescDrawer);
