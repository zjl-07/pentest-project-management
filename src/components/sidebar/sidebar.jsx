import React, { useState } from "react";
import { withRouter } from "react-router-dom";
import { connect } from "react-redux";
import { createStructuredSelector } from "reselect";
import { selectCurrentUser } from "redux/user/user.selector";
import BusinessIcon from "@material-ui/icons/Business";
import AssignmentIcon from "@material-ui/icons/Assignment";
import AssignmentIndIcon from "@material-ui/icons/AssignmentInd";
import Avatar from "@material-ui/core/Avatar";

const Sidebar = ({ isActive, history, user }) => {
  const [active, setActive] = useState("");
  const [sidebarList] = useState([
    {
      id: 1,
      icon: <BusinessIcon fontSize="large" />,
      name: "Corporate List",
      link: "/"
    },
    {
      id: 2,
      icon: <AssignmentIcon fontSize="large" />,
      name: "All Project",
      link: "/all-project"
    },
    {
      id: 3,
      icon: <AssignmentIndIcon fontSize="large" />,
      name: "My Project",
      link: "/my-project"
    }
  ]);

  const onSidebarListToggle = value => setActive(value);
  const sidebarActive = value => (value === active ? "sidebar_active" : "");

  return (
    <div className={`sidebar ${isActive}`}>
      <ul>
        {user && (
          <div className="profile">
            <div className="image">
              <Avatar className="avatar">{user.name.slice(0, 1)}</Avatar>
            </div>
            <div className="desc">
              <p className="name">{user.name}</p>
              <p className="position">{user.role}</p>
            </div>
          </div>
        )}

        {sidebarList.map(list => (
          <li
            key={list.id}
            onClick={() => {
              onSidebarListToggle(list.name);
              history.push(`${list.link}`);
            }}
            className={`${sidebarActive(list.name)}`}
          >
            {list.icon}
            <div className="title">{list.name}</div>
          </li>
        ))}
      </ul>
    </div>
  );
};

const mapStateToProps = createStructuredSelector({
  user: selectCurrentUser
});

export default withRouter(connect(mapStateToProps, null)(Sidebar));
