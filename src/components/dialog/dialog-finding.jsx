import React from "react";
import { withRouter } from "react-router-dom";
import { useStyles } from "./dialog.styles";
import {
  Card,
  CardMedia,
  Button,
  Badge,
  Typography,
  Dialog,
  DialogActions,
  DialogContent,
  DialogTitle,
  TextField
} from "@material-ui/core";

const DialogFinding = ({ modal, data, onToggleModal, history, match }) => {
  const classes = useStyles();
  return (
    <Dialog
      open={modal}
      onClose={() => onToggleModal(data)}
      aria-labelledby="alert-dialog-title"
      aria-describedby="alert-dialog-description"
      className={classes.findingDialog}
    >
      {console.log("data", data)}
      <DialogTitle id="alert-dialog-title">
        <div className={classes.layout}>
          <Typography gutterBottom variant="h4">
            {data.name}
          </Typography>
          <Badge
            className={classes.status}
            badgeContent={data.status ? "DONE" : "CLOSED"}
            color={data.status ? "primary" : "secondary"}
          />
        </div>
      </DialogTitle>
      <DialogContent className={classes.findingDialogContent}>
        <TextField
          InputProps={{
            readOnly: true
          }}
          label="Description"
          multiline
          rows="5"
          value={data.description}
          className={classes.textField}
          margin="normal"
          variant="outlined"
        />
        <TextField
          InputProps={{
            readOnly: true
          }}
          multiline
          rows="5"
          label={data.desc.name}
          value={data.desc.description}
          className={classes.textField}
          margin="normal"
          variant="outlined"
        />
        <TextField
          InputProps={{
            readOnly: true
          }}
          multiline
          rows="2"
          label="Impact"
          value={data.desc.impact}
          className={classes.textField}
          margin="normal"
          variant="outlined"
        />
        <TextField
          InputProps={{
            readOnly: true
          }}
          multiline
          rows="2"
          label="Mitigation"
          value={data.desc.mitigation}
          className={classes.textField}
          margin="normal"
          variant="outlined"
        />
        <div className={classes.layout}>
          <TextField
            InputProps={{
              readOnly: true
            }}
            multiline
            label="CWE"
            rows="2"
            value={data.desc.cwe}
            className={classes.textFieldSmall}
            margin="normal"
            variant="outlined"
          />
          <TextField
            InputProps={{
              readOnly: true
            }}
            label="Location"
            multiline
            rows="2"
            value={data.location}
            className={classes.textFieldSecondary}
            margin="normal"
            variant="outlined"
          />
        </div>
        {!!data.fileName && (
          <div className="finding-media">
            <span>POC</span>
            <img src={data.poc} />
          </div>
        )}
      </DialogContent>
      {console.log("dataaa", data)}
      {data.child && (
        <DialogActions>
          <Button
            // onClick={() => history.push(`/corporate/${data.id}/projects`)}
            color="primary"
            variant="contained"
            id="default-size"
          >
            Open Other Similar Findings
          </Button>
        </DialogActions>
      )}
    </Dialog>
  );
};

export default withRouter(DialogFinding);
