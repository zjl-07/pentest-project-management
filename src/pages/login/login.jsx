import React, { Component } from "react";
import { Form, Field } from "react-final-form";
import { TextField } from "final-form-material-ui";
import { Paper, Button } from "@material-ui/core";
import { loginStart } from "redux/user/user.action";
import { connect } from "react-redux";

class Login extends Component {
  onSubmit = async values => {
    const { history } = this.props;
    this.props.login(values, history);
  };

  render() {
    const { onSubmit } = this;
    return (
      <div className="login-register">
        <Form
          onSubmit={onSubmit}
          render={({ handleSubmit, submitting, values }) => (
            <form onSubmit={handleSubmit} noValidate>
              <Paper className="login-register_content">
                <h2 className="center">Login</h2>
                <Field
                  fullWidth
                  name="email"
                  label="Email"
                  component={TextField}
                  margin="normal"
                  variant="outlined"
                />
                <Field
                  fullWidth
                  name="password"
                  label="Password"
                  component={TextField}
                  type="password"
                  margin="normal"
                  variant="outlined"
                />
                <div className="justify u-margin-top-medium">
                  <Button
                    id="default-size"
                    variant="contained"
                    color="primary"
                    className="u-margin-right-small"
                    type="submit"
                  >
                    Sign in
                  </Button>
                </div>
              </Paper>
            </form>
          )}
        />
      </div>
    );
  }
}

const mapDispatchToProps = dispatch => ({
  login: (values, history) => dispatch(loginStart(values, history))
});
export default connect(null, mapDispatchToProps)(Login);
