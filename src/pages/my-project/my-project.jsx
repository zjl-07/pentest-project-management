import React, { useState } from "react";
import { createStructuredSelector } from "reselect";
import { connect } from "react-redux";
import { selectMyProjects } from "redux/project/project.selector";
import ProjectItem from "components/project-item/project-item";
import SearchIcon from "@material-ui/icons/Search";

const MyProject = ({ myProjects }) => {
  const [search, setSearhValue] = useState("");

  const handleFilter = e => setSearhValue(e.target.value);

  const filteredProjects = myProjects.filter(
    project => project.name.toLowerCase().indexOf(search.toLowerCase()) !== -1
  );
  return (
    <div className="my-projects">
      <div className="search u-margin-bottom-small">
        <div className="search-icon">
          <SearchIcon />
        </div>
        <input
          type="text"
          placeholder="Searchâ€¦"
          className="search-input"
          onChange={handleFilter}
        />
      </div>

      <div className="card-layout u-margin-top-small">
        {myProjects &&
          filteredProjects.map(({ _id, ...rest }) => (
            <ProjectItem key={_id} {...rest} id={_id} />
          ))}
      </div>
    </div>
  );
};

const mapStateToProps = createStructuredSelector({
  myProjects: selectMyProjects
});

const mapDispatchToProps = () => ({});

export default connect(mapStateToProps, mapDispatchToProps)(MyProject);
