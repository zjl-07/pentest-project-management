import { all, takeLatest, call, put } from "redux-saga/effects";
import actionTypes from "./corporate.actionTypes";
import {
  fetchCorporateSuccess,
  fetchCorporateFailure
} from "./corporate.action";
import API from "API/jsonServer";

const fetchFromAPI = () => API.get("/corporate");

export function* fetchCorporate() {
  try {
    const { data } = yield call(fetchFromAPI);
    yield put(fetchCorporateSuccess(data));
  } catch (error) {
    yield put(fetchCorporateFailure(error));
  }
}

export function* onFetchCorporateStart() {
  yield takeLatest(actionTypes.FETCH_CORPORATE_START, fetchCorporate);
}

export function* corporateSagas() {
  yield all([call(onFetchCorporateStart)]);
}
